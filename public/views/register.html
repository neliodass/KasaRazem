<!doctype html>
<html lang="<?= TranslationService::getInstance()->getCurrentLang() ?>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script>
        // Natychmiastowe ustawienie motywu (przed renderowaniem), aby uniknąć migotania
        (function() {
            const theme = localStorage.getItem('userTheme') || 'light';
            document.documentElement.classList.add('theme-' + theme);
        })();
    </script>

    <link href="public/styles/_theme.css" type="text/css" rel="stylesheet"/>
    <link href="public/styles/_base.css" type="text/css" rel="stylesheet"/>
    <link href="public/styles/_components.css" type="text/css" rel="stylesheet"/>
    <link href="public/styles/login.css" type="text/css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&amp;display=swap"
          rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
          rel="stylesheet"/>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 24
        }
    </style>
    <script src="public/scripts/theme.js"></script>
    <script src="public/scripts/showPassword.js"></script>
    <title><?= trans('register.title') ?></title>
</head>

<body>
<div class="page-wrapper">
    <div class="login-box">
        <div class="container">
            <span class="material-symbols-outlined">shopping_cart</span>
        </div>
        <h1 class="headline"><?= trans('register.title') ?></h1>
        <p class="body-text">Zacznij zarządzać wspólnymi wydatkami.</p>
        <div class="form-group-wrapper">
            <form method="post" action="/register">
                <?= $csrfField(); ?>
                <?php if(isset($message)): ?>
                <p class="messages">
                    <?= $message; ?>
                </p>
                <?php endif; ?>
                <div class="input-group">
                    <label for="firstName" class="sr-only"><?= trans('register.firstname_placeholder') ?></label>
                    <input name="firstName" type="text" id="firstName" placeholder="<?= trans('register.firstname_placeholder') ?>" required>
                </div>
                <div class="input-group">
                    <label for="lastName" class="sr-only"><?= trans('register.lastname_placeholder') ?></label>
                    <input name="lastName" type="text" id="lastName" placeholder="<?= trans('register.lastname_placeholder') ?>" required>
                </div>
                <div class="input-group">
                    <label for="email" class="sr-only"><?= trans('register.email_placeholder') ?></label>
                    <input name="email" type="email" id="email" placeholder="<?= trans('register.email_placeholder') ?>" required>
                </div>
                <div class="input-group">
                    <label for="password" class="sr-only"><?= trans('register.password_placeholder') ?></label>
                    <input name="password" type="password" class="password-input" id="password" placeholder="<?= trans('register.password_placeholder') ?>" required>
                    <button type="button" class="show-password-btn">Pokaż</button>
                </div>
                <div class="input-group">
                    <label for="password-repeat" class="sr-only"><?= trans('register.password_placeholder') ?></label>
                    <input name="password-repeat" class="password-input" type="password" id="password-repeat" placeholder="Powtórz hasło" required>
                    <button type="button" class="show-password-btn">Pokaż</button>
                </div>
                <button type="submit" class="login-button">
                    <?= trans('register.submit_button') ?>
                </button>
            </form>
        </div>
        <div class="end-section">
            <span><?= trans('register.have_account') ?></span>
            <a href="/login"><?= trans('register.login_link') ?></a>
        </div>
        <div style="margin-top: 1rem; display: flex; gap: 0.5rem; justify-content: center;">
            <a href="/change-language?lang=pl" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 4px; text-decoration: none;">PL</a>
            <a href="/change-language?lang=en" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 4px; text-decoration: none;">EN</a>
        </div>
    </div>
</div>
</body>
</html>