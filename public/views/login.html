<!doctype html>
<html lang="<?= TranslationService::getInstance()->getCurrentLang() ?>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="/public/favicon.ico">

    <script>
        (function() {
            const theme = localStorage.getItem('userTheme') || 'light';
            document.documentElement.classList.add('theme-' + theme);
        })();
    </script>

    <link href="public/styles/_theme.css" type="text/css" rel="stylesheet"/>
    <link href="public/styles/_base.css" type="text/css" rel="stylesheet"/>
    <link href="public/styles/_components.css" type="text/css" rel="stylesheet"/>
    <link href="public/styles/login.css" type="text/css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&amp;display=swap"
          rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
          rel="stylesheet"/>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 24
        }
    </style>
    <script src="public/scripts/theme.js"></script>
    <script src="public/scripts/showPassword.js"></script>
    <script>
        function fillDemoCredentials() {
            document.getElementById('email').value = 'demo@kasarazem.pl';
            document.getElementById('password').value = 'demo123';
            // document.querySelector('form').submit();
        }
    </script>
    <title><?= trans('login.title') ?></title>
</head>

<body>
<div class="page-wrapper">
    <div class="login-box">
            <div class="container">
                <span class="material-symbols-outlined">shopping_cart</span>
            </div>
                <h1 class="headline"><?= trans('login.title') ?></h1>
                <p class="body-text"><?= trans('login.cta') ?></p>
        <div class="form-group-wrapper">
            <form method="post" action="/login">
                <?= $csrfField(); ?>
                <?php if(isset($message)): ?>
                <p class="messages">
                    <?= $message; ?>
                </p>
                <?php endif; ?>
                <div class="input-group">
                    <label for="email" class="sr-only"><?= trans('login.email_placeholder') ?></label>
                    <input name="email" type="email" id="email" placeholder="<?= trans('login.email_placeholder') ?>" required>
                </div>
                <div class="input-group">
                    <label for="password" class="sr-only"><?= trans('login.password_placeholder') ?></label>
                    <input name="password" type="password" class="password-input" id="password" placeholder="<?= trans('login.password_placeholder') ?>" required>
                    <button type="button" class="show-password-btn"><?= trans('login.show_password') ?></button>
                </div>
                <div class="input-group" style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0;">
                    <input type="checkbox" name="remember_me" id="remember_me" style="width: auto; height: auto; margin: 0;">
                    <label for="remember_me" style="margin: 0; font-size: 0.875rem; cursor: pointer;"><?= trans('login.remember_me') ?></label>
                </div>
                <button type="submit" class="login-button">
                    <?= trans('login.submit_button') ?>
                </button>

                <!-- Demo Mode Button: DEMO_MODE=true -->
                <?php if(isset($demoMode) && $demoMode): ?>
                <button type="button" class="demo-button" style="margin-top:0.75rem" onclick="fillDemoCredentials()">
                    <span class="material-symbols-outlined" style="font-size: 18px;">science</span>
                    <?= trans('login.use_demo') ?>
                </button>
                <?php endif; ?>

                <div class="forgot-password">
                    <a href="#"><?= trans('login.dont_remember_password') ?></a>
                </div>
            </form>
        </div>
        <div class="end-section">
            <span><?= trans('login.no_account') ?></span>
            <a href="/register"><?= trans('login.register_link') ?></a>
        </div>
        <div style="margin-top: 1rem; display: flex; gap: 0.5rem; justify-content: center;">
            <a href="/change-language?lang=pl" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 4px; text-decoration: none;">PL</a>
            <a href="/change-language?lang=en" style="padding: 0.5rem; border: 1px solid var(--border-color); border-radius: 4px; text-decoration: none;">EN</a>
        </div>
    </div>
</div>
</body>
</html>