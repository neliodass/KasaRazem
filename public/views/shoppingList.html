<?php include 'public/views/groupHeader.html'; ?>

<link href="/public/styles/shoppingList.css" type="text/css" rel="stylesheet"/>

<div class="tab-panel active" style="padding-bottom: 6rem;"> <div class="shopping-list-tabs-container no-scrollbar">
    <?php if (!empty($lists)): ?>
    <?php foreach ($lists as $index => $list): ?>
    <button
            onclick="loadList(<?= $list['id'] ?>, this)"
            class="list-tab-button <?= ($index === 0) ? 'list-tab-active' : 'list-tab-inactive' ?>">
        <?= htmlspecialchars($list['name']) ?>
    </button>
    <?php endforeach; ?>
    <?php endif; ?>

    <button onclick="openNewListModal()"
            class="list-tab-button new-list-btn">
        + Nowa lista
    </button>
</div>

    <div id="items-container">
        <section class="mt-4">
            <div class="section-header-wrapper">
                <h2 class="section-title">Do kupienia</h2>
                <span id="to-buy-count" class="items-count-badge">
                    0 produktów
                </span>
            </div>
            <div id="active-items-list" class="items-list-container">
                <p class="empty-state-text">Wybierz listę, aby zobaczyć produkty.</p>
            </div>
        </section>

        <section class="purchased-section">
            <h2 class="purchased-header">
                Kupione
            </h2>
            <div id="purchased-items-list" class="items-list-container">
            </div>
        </section>
    </div>

</div>

<div class="shopping-bottom-actions">
    <div class="add-item-wrapper">
        <input type="text" id="new-item-name" placeholder="Co trzeba kupić?"
               class="add-item-input"
               onkeypress="handleEnter(event)">
        <button onclick="addItem()" class="add-item-btn">
            <span class="material-symbols-outlined">add</span>
        </button>
    </div>
</div>

</main> </div>
<script>
    window.groupId = <?= $groupId ?>;
    window.currentListId = <?= $activeListId ?? 'null' ?>;
    window.initialItems = <?= json_encode($items ?? []) ?>;
</script>
<script src="/public/scripts/shoppingList.js"></script>
</body>
</html>