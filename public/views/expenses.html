<?php include 'public/views/groupHeader.html'; ?>

<div class="tab-panel active">
    <?php
        $lastDate = null;
    ?>
    <h2>Wydatki</h2>
    <?php if(!empty($expenses)): foreach ($expenses as $expense): ?>
    <?php if ($expense->dateIncurred !== $lastDate): ?>
    <div class="date-header" style="padding: 1rem 0 0.5rem 0.5rem;">
        <h3 style="color: var(--color-text-secondary); font-size: 0.9rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin: 0;">
            <?= $expense->dateIncurred ?>
        </h3>
    </div>
    <?php $lastDate = $expense->dateIncurred; ?>
    <?php endif; ?>
    <a href="/groups/<?= $groupId ?>/expense/<?= $expense->id ?>" style="text-decoration: none; color: inherit;">
    <div class="list-card-item">
        <div class="list-card-content">
            <div class="list-card-left-section">
                <div class="list-icon-wrapper" style="background-color:<?= $expense->iconBgColor ?>;">
                    <span class="material-symbols-outlined" style="color: <?= $expense->iconColor ?>;"><?= $expense->icon ?></span>
                </div>
                <div class="list-text-details">
                    <p class="list-item-primary-text" style="margin-bottom: 0.25rem"><?= $expense->name  ?></p>
                    <div style="display: flex; flex-direction: column; align-items: start; ">
                    <p class="list-item-secondary-text">Zapłacone przez:  </p>
                        <p class="list-item-secondary-text" style="font-weight:bold"> <?= $expense->paidBy  ?></p>
                    </div>
                </div>
            </div>
            <div class="list-card-right-section">
                <p class="list-item-value"><?= $expense->amount  ?> zł</p>
            </div>
        </div>
    </div>
    </a>
    <?php endforeach; endif; ?>

    <div class="column-action-button-wrapper desktop-only">
        <a href="/groups/<?= $groupId ?>/addExpense" class="action-button primary">+ Dodaj Wydatek</a>
    </div>
</div>

</main>
</div>

<div class="bottom-actions mobile-only">
    <div class="action-buttons-wrapper">
        <a href="/groups/<?= $groupId ?>/addExpense" class="action-button primary">+ Dodaj Wydatek</a>
    </div>
</div>
</div>
</body>
</html>