<!doctype html>
<html lang="<?= TranslationService::getInstance()->getCurrentLang() ?>">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title><?= $groupName ?> - <?= trans('groups.title') ?></title>

    <script>
        (function() {
            const theme = localStorage.getItem('userTheme') || 'light';
            document.documentElement.classList.add('theme-' + theme);
        })();
    </script>

    <link href="/public/styles/_theme.css" type="text/css" rel="stylesheet"/>
    <link href="/public/styles/_base.css" type="text/css" rel="stylesheet"/>
    <link href="/public/styles/_components.css" type="text/css" rel="stylesheet"/>
    <link href="/public/styles/groups.css" type="text/css" rel="stylesheet"/>

    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&amp;display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"/>
    <style>
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24 }
    </style>
    <script src="/public/scripts/theme.js"></script>
    <script>
        window.translations = {
            copied: '<?= trans('groups.copy') ?>',
            products: '<?= trans('shopping_list.products') ?>',
            all_bought: '<?= trans('shopping_list.all_bought') ?>',
            select_list_first: '<?= trans('shopping_list.select_list_first') ?>',
            shopping_list: '<?= trans('shopping_list.shopping_list') ?>',
            this_list: '<?= trans('shopping_list.this_list') ?>',
            product: '<?= trans('shopping_list.product') ?>',
            this_product: '<?= trans('shopping_list.this_product') ?>',
            delete_failed: '<?= trans('shopping_list.delete_failed') ?>',
            server_error: '<?= trans('shopping_list.server_error') ?>',
        };
        window.trans = function(key) {
            return window.translations[key] || key;
        };
    </script>
</head>

<body class="whole-page-group-details">

<div class="page-wrapper group-details-page-wrapper">
    <script src="/public/scripts/expandMenu.js" defer></script>
    <script src="/public/scripts/inviteModal.js" defer></script>
    <header class="app-bar">
        <div style="width: 48px; height: 48px; display: flex; align-items: center; justify-content: flex-start;">
            <a href="/groups" style="color: inherit; text-decoration: none; display: flex;">
                <span class="material-symbols-outlined">arrow_back</span>
            </a>
        </div>
        <h1><?= $groupName ?? trans('groups.title') ?></h1>

        <div class="dropdown-menu-wrapper">
            <button type="button" id="dropdown-toggle" aria-expanded="false" aria-controls="context-menu">
                <span class="material-symbols-outlined">more_vert</span>
            </button>

            <div id="context-menu" class="dropdown-menu">
                <a href="/groups/<?= $groupId ?>/edit" class="dropdown-item">
                    <span class="material-symbols-outlined">edit</span> <?= trans('common.edit') ?>
                </a>
                <button type="button" class="dropdown-item" id="invite-group-btn">
                    <span class="material-symbols-outlined">person_add</span> <?= trans('groups.add_to_group') ?>
                </button>
                <button type="button" class="dropdown-item delete-action" id="delete-group-btn">
                    <span class="material-symbols-outlined">delete</span> <?= trans('common.delete') ?>
                </button>
            </div>
        </div>
    </header>

    <div class="group-details-content-wrapper">

        <div class="tabs-navigation">
            <a href="/groups/<?= $groupId ?>/expenses"
               class="tab-button <?= $activeTab === 'expenses' ? 'active' : '' ?>">
                <?= trans('expenses.title') ?>
            </a>
            <a href="/groups/<?= $groupId ?>/balance"
               class="tab-button <?= $activeTab === 'balance' ? 'active' : '' ?>">
                <?= trans('balance.title') ?>
            </a>
            <a href="/groups/<?= $groupId ?>/lists"
               class="tab-button <?= $activeTab === 'shopping-lists' ? 'active' : '' ?>">
                <?= trans('shopping_list.title') ?>
            </a>
        </div>

        <main class="group-details-main tab-content-area">